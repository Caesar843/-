{% extends 'base.html' %}

{% block title %}è®¾å¤‡ç®¡ç† - å•†åœºåº—é“ºæ™ºèƒ½è¿è¥ç®¡ç†ç³»ç»Ÿ{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mt-4 mb-4">ğŸ“± è®¾å¤‡ç®¡ç†</h1>

        <!-- è®¾å¤‡åˆ—è¡¨ -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="card-title">æ™ºèƒ½è®¾å¤‡åˆ—è¡¨</h5>
                <a href="{% url 'operations:device-management' %}" class="btn btn-sm btn-primary float-end">åˆ·æ–°</a>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>è®¾å¤‡ID</th>
                                <th>è®¾å¤‡åç§°</th>
                                <th>è®¾å¤‡ç±»å‹</th>
                                <th>æ‰€å±åº—é“º</th>
                                <th>çŠ¶æ€</th>
                                <th>æœ€åæ´»è·ƒæ—¶é—´</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for device in devices %}
                            <tr>
                                <td>{{ device.device_id }}</td>
                                <td>{{ device.device_name }}</td>
                                <td>{{ device.get_device_type_display }}</td>
                                <td>{{ device.shop.name }}</td>
                                <td>
                                    {% if device.status == device.DeviceStatus.ONLINE %}
                                    <span class="badge bg-success">åœ¨çº¿</span>
                                    {% else %}
                                    <span class="badge bg-danger">ç¦»çº¿</span>
                                    {% endif %}
                                </td>
                                <td>{{ device.last_active_at|date:'Y-m-d H:i' }}</td>
                                <td>
                                    <a href="#" class="btn btn-sm btn-info">è¯¦æƒ…</a>
                                    <a href="#" class="btn btn-sm btn-warning">ç¼–è¾‘</a>
                                    <a href="#" class="btn btn-sm btn-danger">åˆ é™¤</a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- æ·»åŠ è®¾å¤‡ -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="card-title">æ·»åŠ è®¾å¤‡</h5>
            </div>
            <div class="card-body">
                <form method="post" action="{% url 'operations:device-management' %}">
                    {% csrf_token %}
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="device_name" class="form-label">è®¾å¤‡åç§°</label>
                            <input type="text" class="form-control" id="device_name" name="device_name">
                        </div>
                        <div class="col-md-6">
                            <label for="device_type" class="form-label">è®¾å¤‡ç±»å‹</label>
                            <select class="form-select" id="device_type" name="device_type">
                                <option value="">è¯·é€‰æ‹©è®¾å¤‡ç±»å‹</option>
                                <option value="FOOT_TRAFFIC">å®¢æµç»Ÿè®¡ä»ª</option>
                                <option value="POS">POSæœº</option>
                                <option value="ENVIRONMENT">ç¯å¢ƒç›‘æµ‹</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="shop" class="form-label">æ‰€å±åº—é“º</label>
                            <select class="form-select" id="shop" name="shop">
                                <option value="">è¯·é€‰æ‹©åº—é“º</option>
                                {% for shop in shops %}
                                <option value="{{ shop.id }}">{{ shop.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="device_id" class="form-label">è®¾å¤‡ID</label>
                            <input type="text" class="form-control" id="device_id" name="device_id">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">æ·»åŠ è®¾å¤‡</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}