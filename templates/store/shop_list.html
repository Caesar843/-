{% extends "base.html" %}
{% load static %}

{% block title %}&#x5E97;&#x94FA;&#x5217;&#x8868; - {{ block.super }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/ui-tokens.css' %}">
<link rel="stylesheet" href="{% static 'css/ui-components.css' %}">
<link rel="stylesheet" href="{% static 'css/store-management.css' %}">
{% endblock %}

{% block content %}
<div class="container store-page">
    <div class="store-header">
        <div class="store-title-wrap">
            <span class="store-title-bar"></span>
            <div>
                <div class="store-title">&#x5E97;&#x94FA;&#x5217;&#x8868;</div>
                <div class="store-subtitle">&#x95E8;&#x5E97;&#x57FA;&#x7840;&#x4FE1;&#x606F;&#x4E0E;&#x7ECF;&#x8425;&#x72B6;&#x6001;&#x6982;&#x89C8;</div>
            </div>
        </div>
        {% if can_create_shop %}
        <div class="store-actions">
            <a href="{% url 'store:shop_create' %}" class="ui-btn ui-btn-primary">&#x65B0;&#x5EFA;&#x5E97;&#x94FA;</a>
            <a href="{% url 'store:shop_export' %}" class="ui-btn ui-btn-outline">&#x5BFC;&#x51FA;&#x5E97;&#x94FA;</a>
            <a href="{% url 'store:shop_import' %}" class="ui-btn ui-btn-outline">&#x5BFC;&#x5165;&#x5E97;&#x94FA;</a>
        </div>
        {% elif user.is_authenticated %}
        <div class="store-actions">
            <a href="{% url 'store:shop_export' %}" class="ui-btn ui-btn-outline">&#x5BFC;&#x51FA;&#x5E97;&#x94FA;</a>
            <a href="{% url 'store:shop_import' %}" class="ui-btn ui-btn-outline">&#x5BFC;&#x5165;&#x5E97;&#x94FA;</a>
        </div>
        {% endif %}
    </div>

    {% if shops %}
    <div class="ui-card ui-section store-table-card">
        <div class="table-responsive">
            <table class="ui-table">
                <thead>
                    <tr>
                        <th>&#x5E97;&#x94FA;&#x540D;&#x79F0;</th>
                        <th>&#x4E1A;&#x6001;&#x7C7B;&#x578B;</th>
                        <th>&#x7ECF;&#x8425;&#x9762;&#x79EF; (&#x33A1;)</th>
                        <th>&#x79DF;&#x91D1; (&#x5143;/&#x6708;)</th>
                        <th>&#x8054;&#x7CFB;&#x4EBA;</th>
                        <th>&#x8054;&#x7CFB;&#x65B9;&#x5F0F;</th>
                        <th>&#x5165;&#x9A7B;&#x65E5;&#x671F;</th>
                        <th>&#x63CF;&#x8FF0;</th>
                        <th>&#x64CD;&#x4F5C;</th>
                    </tr>
                </thead>
                <tbody>
                    {% for shop in shops %}
                    <tr>
                        <td>{{ shop.name }}</td>
                        <td>{{ shop.get_business_type_display }}</td>
                        <td class="numeric">{{ shop.area }}</td>
                        <td class="numeric">{{ shop.rent }}</td>
                        <td>{{ shop.contact_person|default:"-" }}</td>
                        <td>{{ shop.contact_phone|default:"-" }}</td>
                        <td>{{ shop.entry_date|date:"Y-m-d"|default:"-" }}</td>
                        <td>{{ shop.description|default:"-" }}</td>
                        <td>
                            {% if user.is_authenticated %}
                            <a href="{% url 'store:shop_update' shop.pk %}" class="ui-btn ui-btn-primary ui-btn-sm">&#x7F16;&#x8F91;</a>
                            <form method="post" action="{% url 'store:shop_delete' shop.pk %}" class="d-inline">
                                {% csrf_token %}
                                <button type="submit" class="ui-btn ui-btn-outline ui-btn-sm">&#x5220;&#x9664;</button>
                            </form>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% else %}
    <div class="ui-alert">
        <strong>&#x6682;&#x65E0;&#x5E97;&#x94FA;</strong>&#x3002;&#x8BF7;&#x901A;&#x8FC7;&#x5E97;&#x94FA;&#x7ED1;&#x5B9A;&#x7533;&#x8BF7;&#x4E0E;&#x5BA1;&#x6279;&#x6D41;&#x7A0B;&#x65B0;&#x589E;&#x5E97;&#x94FA;&#x3002;
    </div>
    {% endif %}
</div>
{% endblock %}
